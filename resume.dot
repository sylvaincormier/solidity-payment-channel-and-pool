digraph LiquidityPoolTests {
  // Arrange nodes from top to bottom
  rankdir=TB;

  // Set default node style to pastel-ish
  node [
    shape="box",
    style="filled",
    fontname="Helvetica",
    fontcolor="#333333",
    color="#F8E8F8",      // Outline color
    fillcolor="#F8E8F8",  // Background color
    penwidth=1.5
  ];

  // Default edge style: subtle lines
  edge [
    color="#AAAACC",
    penwidth=1.5
  ];

  // Subgraph for Basic Functionality Tests
  subgraph cluster_basic {
    label="Basic Functionality Tests 🏊‍♀️";
    style=filled;
    color="#FFE6EA"; // pastel pink background

    "testInitialLiquidity" [
      label="testInitialLiquidity()",
      fillcolor="#FFC8DD" // slightly deeper pastel
    ];
    "testMultipleDeposits" [
      label="testMultipleDeposits()",
      fillcolor="#FFC8DD"
    ];
    "testSwap" [
      label="testSwap()",
      fillcolor="#FFC8DD"
    ];
    "testRemoveLiquidity" [
      label="testRemoveLiquidity()",
      fillcolor="#FFC8DD"
    ];
  }

  // Subgraph for Security Tests
  subgraph cluster_security {
    label="Security Tests 🔒";
    style=filled;
    color="#FFFACD"; // pale yellow

    "test_RevertWhen_FlashLoanAttack" [
      label="test_RevertWhen_FlashLoanAttack()",
      fillcolor="#FFFFD1"
    ];
    "test_RevertWhen_SwapAmountTooLarge" [
      label="test_RevertWhen_SwapAmountTooLarge()",
      fillcolor="#FFFFD1"
    ];
  }

  // Subgraph for Edge/Additional Tests
  subgraph cluster_edge {
    label="Edge & Additional Tests ⚙️";
    style=filled;
    color="#CCFFCC"; // pale green

    "testK_ValueProtection" [
      label="testK_ValueProtection()",
      fillcolor="#CCFF99"
    ];
    "test_RevertWhen_AddingInsufficientLiquidity" [
      label="test_RevertWhen_AddingInsufficientLiquidity()",
      fillcolor="#CCFF99"
    ];
    "testAsymmetricLiquidity" [
      label="testAsymmetricLiquidity()",
      fillcolor="#CCFF99"
    ];
    "testMinimumLiquidity" [
      label="testMinimumLiquidity()",
      fillcolor="#CCFF99"
    ];
    "test_RevertWhen_RemovingTooMuchLiquidity" [
      label="test_RevertWhen_RemovingTooMuchLiquidity()",
      fillcolor="#CCFF99"
    ];
  }

  // Example flow edges for Basic Tests
  "testInitialLiquidity" -> "testMultipleDeposits"
    [label=" then ", fontcolor="#777777", color="#B19CD9"];
  "testMultipleDeposits" -> "testSwap"
    [label=" next ", fontcolor="#777777", color="#B19CD9"];
  "testSwap" -> "testRemoveLiquidity"
    [label=" finally ", fontcolor="#777777", color="#B19CD9"];

  // Example flow for Security Tests
  "test_RevertWhen_FlashLoanAttack" -> "test_RevertWhen_SwapAmountTooLarge"
    [label=" both security checks ", fontcolor="#777777", color="#FFCBA4"];

  // Example flow for Edge Tests
  "testK_ValueProtection" -> "testAsymmetricLiquidity"
    [label=" advanced scenario ", fontcolor="#777777", color="#C1F0F6"];
  "testAsymmetricLiquidity" -> "testMinimumLiquidity"
    [label=" related checks ", fontcolor="#777777", color="#C1F0F6"];
  "testMinimumLiquidity" -> "test_RevertWhen_RemovingTooMuchLiquidity"
    [label=" final edge case ", fontcolor="#777777", color="#C1F0F6"];
}

